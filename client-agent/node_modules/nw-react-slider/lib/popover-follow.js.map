{"version":3,"sources":["../src/popover-follow.jsx"],"names":[],"mappings":"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","file":"popover-follow.js","sourcesContent":["var React = require('react')\nvar ReactDOM = require('react-dom')\nvar isUndefined = require('lodash/isUndefined')\n\nmodule.exports = React.createClass({\n  displayName: 'popover-follow',\n\n  propTypes: {\n    position: React.PropTypes.number,\n    value: React.PropTypes.number,\n    trackWidth: React.PropTypes.number,\n    handleWidth: React.PropTypes.number\n  },\n\n  getDefaultProps: function () {\n    return {\n      position: 0,\n      value: 0,\n      trackWidth: 0\n    }\n  },\n\n  getInitialState: function () {\n    return {\n      arrowPosition: undefined,\n      bubblePosition: undefined,\n      popoverWidth: 0,\n      arrowWidth: 0\n    }\n  },\n\n  componentDidMount: function () {\n    this.updatePopoverAndArrowWidth()\n    window.addEventListener('resize', () => {\n      this.updatePopoverAndArrowWidth()\n    })\n  },\n\n  setPosition: function (props = this.props) {\n    var trackWidth = this.props.trackWidth\n    if (this.props.handleWidth) {\n      trackWidth += this.props.handleWidth\n    }\n    var spaceArrowShouldMove = this.state.popoverWidth / 2 - this.state.arrowWidth\n\n    if (props.position >= spaceArrowShouldMove && props.position <= (this.props.trackWidth - spaceArrowShouldMove)) {\n      // Middle of the slider where the popover is completely inside the width of the slider\n      this.setState({ bubblePosition: props.position, arrowPosition: spaceArrowShouldMove })\n    } else if (props.position < spaceArrowShouldMove) {\n      // Left section of the slider\n      this.setState({ arrowPosition: (props.position), bubblePosition: (spaceArrowShouldMove) })\n    } else if (props.position > (this.props.trackWidth - spaceArrowShouldMove)) {\n      // Right section of the slider\n      this.setState({ arrowPosition: (props.position - 2 * spaceArrowShouldMove), bubblePosition: trackWidth - spaceArrowShouldMove - this.props.handleWidth })\n    }\n  },\n\n  componentWillReceiveProps: function (nextProps) {\n    this.setPosition(nextProps)\n  },\n\n  updatePopoverAndArrowWidth: function () {\n    var popover = ReactDOM.findDOMNode(this.refs.popover)\n    if (!popover) {\n      return\n    }\n    var popoverWidth = popover.offsetWidth\n    var arrowWidth = ReactDOM.findDOMNode(this.refs.popover).getElementsByClassName('arrow').length > 0 ? ReactDOM.findDOMNode(this.refs.popover).getElementsByClassName('arrow')[0].offsetWidth : 12\n    this.setState({popoverWidth, arrowWidth}, this.setPosition)\n  },\n\n  render: function () {\n    var styles = {}\n    if (isUndefined(this.state.arrowPosition) || isUndefined(this.state.bubblePosition)) {\n      styles = {visibility: 'hidden'}\n    }\n    var popoverStyle = {\n      display: 'block',\n      left: this.state.bubblePosition\n    }\n    var arrowStyle = {\n      left: this.state.arrowPosition\n    }\n    return (\n      <div style={styles} ref='container' className='popover-container'>\n        <div role='tooltip' ref='popover' className='popover' style={popoverStyle}>\n          <div className='popover__arrow' style={arrowStyle}></div>\n          <div className='popover__content'>\n            { this.props.value }\n          </div>\n        </div>\n      </div>\n    )\n  }\n})\n"]}